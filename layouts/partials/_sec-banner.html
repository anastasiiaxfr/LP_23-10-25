{{ $data := index .Site.Data .Site.Language.Lang }}

{{ if $data.homepage.section_banner }}
{{ with $data.homepage.section_banner }}
<section class="section section--banner">
    <div class="container">
        <div class="banner">
            <div>
                <h2>{{ .title | markdownify }}</h2>
                <p class="subtitle">
                    {{ .description | markdownify}}
                </p>
            </div>
            <div>

                <div class="counter" data-days="{{ .days }}">
                    <div><b>{{ .counter }}</b></div>
                    <div class="counter-val">
                        <!-- Здесь JS вставит дату -->
                    </div>
                </div>
                <script>
                    document.addEventListener('DOMContentLoaded', () => {
                        const counter = document.querySelector('.counter');
                        if (!counter) return;

                        const days = parseInt(counter.getAttribute('data-days'), 10);
                        if (isNaN(days)) return;

                        const now = new Date();
                        const targetDate = new Date(now.getTime() + days * 24 * 60 * 60 * 1000);

                        const ukMonths = [
                            "січня", "лютого", "березня", "квітня", "травня", "червня",
                            "липня", "серпня", "вересня", "жовтня", "листопада", "грудня"
                        ];

                        function formatDateUkrHTML(date) {
                            const day = date.getDate();
                            const month = ukMonths[date.getMonth()];
                            return `<big>${day}</big>${month}`;
                        }

                        const formattedHTML = formatDateUkrHTML(targetDate);

                        const counterVal = counter.querySelector('.counter-val');
                        if (counterVal) {
                            counterVal.innerHTML = formattedHTML;
                        }
                    });
                </script>
            </div>
            <div>
                <h3>{{ .how.title }}</h3>
                <ul class="list list--1">
                    {{ range .how.list }}
                    <li>
                        <span>
                            {{ .item }}
                            <span class="list-img">
                                {{ range .imgs }}
                                <img src="{{ .img | relURL }}" alt="" width="169" height="145">
                                {{ end }}
                            </span>
                        </span>
                    </li>
                    {{ end }}
                </ul>
            </div>
        </div>
    </div>
</section>
{{ end }}
{{ end }}